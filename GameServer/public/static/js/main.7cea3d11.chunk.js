(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,n){e.exports=n(85)},85:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),c=n.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(39),s=n(15),i=n(13),u=n(34),h=n(5),m=n(6),b=n(9),d=n(7),g=n(19),p=n(8),f={LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",LOGOUT:"USERS_LOGOUT",GETALL_SUCCESS:"USERS_GETALL_SUCCESS",GETALL_FAILURE:"USERS_GETALL_FAILURE"},O={LOBBY_SUCCESS:"LOBBY_SUCCESS",LOBBY_FAILURE:"LOBBY_FAILURE"},E=n(16),v=n.n(E);function S(){var e=JSON.parse(localStorage.getItem("accessToken"));return console.log("call","authHeader",e),e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var L=n(14),y=n(35),j=n(36),C=localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):null,I=C?{type:f.LOGIN_SUCCESS,loggedIn:!0,token:C}:{type:f.LOGIN_FAILURE};var k=Object(L.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.LOGIN_SUCCESS:return{loggedIn:!0,token:t.token};case f.LOGIN_FAILURE:case f.LOGOUT:return{};default:return e}},lobby:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("reducer",e),t.type){case O.LOBBY_SUCCESS:return t.lobbyList;case O.LOBBY_FAILURE:return[];default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.GETALL_SUCCESS:return{items:t.token};case f.GETALL_FAILURE:return{error:t.error};default:return e}}}),U=Object(j.createLogger)(),w=Object(L.e)(k,Object(L.d)(Object(L.a)(y.a,U),window.devToolsExtension?window.devToolsExtension():function(e){return e})),_={login:function(e,t){var n={headers:{"Content-Type":"application/json"},usernameOrEmail:e,password:t};return v.a.post("http://localhost:8080/api/auth/signin",n).then(function(e){if(200===e.status)return console.log("user service",e),localStorage.setItem("accessToken",JSON.stringify(e.data)),e.data}).catch(function(e){return console.log("post error",e),G(),Promise.reject(e)})},logout:G};function G(){localStorage.removeItem("accessToken")}var T={getlobby:function(){var e={headers:S()};return console.log("getlobby request",e),v.a.get("localhost:4000/room/list",e).then(function(e){return console.log("getlobby get",e.data),e.data}).catch(function(e){console.log(e)})}};var A={login:function(e,t){return function(n){_.login(e,t).then(function(e){console.log("user actions",e),n(function(e){return{type:f.LOGIN_SUCCESS,accessToken:e}}(e))},function(e){console.log("user error",e),n(function(e){return{type:f.LOGIN_FAILURE,error:e}}(e))})}},logout:function(){return _.logout(),{type:f.LOGOUT}}};var B={getGameLobby:function(){return function(e){T.getlobby().then(function(t){var n;console.log("loadLobby","success"),e((n=t,{type:O.LOBBY_SUCCESS,lobbyList:n}))},function(t){console.log("loadLobby","error"),e(function(e){return{type:O.LOBBY_FAILURE,error:e}}(t))})}}};var R=n(37),N=n.n(R),F=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(d.a)(t).call(this,e))).state={clicked:!1,url:"/lobby",token:""},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.clicked,a=t.url;return o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.toggleOpened()}},"GameStart"),n&&this.props.loggedIn&&o.a.createElement(N.a,{url:a,onUnload:function(){return e.newWindowUnloaded()},features:Y}))}},{key:"toggleOpened",value:function(){this.props.loggedIn?this.setState(function(e){return{clicked:!e.clicked}}):console.log("please login")}},{key:"newWindowUnloaded",value:function(){this.setState({clicked:!1})}}]),t}(a.Component),Y={width:1280,height:1280,left:0,top:0},x=F,H=function(e){function t(e){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).call(this,e))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("form",{name:"form",onSubmit:this.props.handleSubmit},o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"username"},"Username"),o.a.createElement("input",{type:"text",className:"form-control",name:"username",value:this.props.username,onChange:this.props.handleChange})),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",className:"form-control",name:"password",value:this.props.password,onChange:this.props.handleChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{className:"btn btn-primary"},"Login")))}}]),t}(a.Component),J=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("h3",null,"HI HI HI")}}]),t}(a.Component),W=function(e){var t=e.name;return o.a.createElement("li",null,t)},D=function(e){var t=e.lobbys;return o.a.createElement("ul",null,t.map(function(e){return o.a.createElement(W,{key:e.master_user,name:e.room_name})}))},M=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(u.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.username,a=t.password,o=this.props.dispatch;n&&a&&o(A.login(n,a))}},{key:"render",value:function(){var e=this.props.loggedIn,t=this.state,n=t.username,a=t.password;return o.a.createElement("div",null,e||localStorage.getItem("accessToken")?o.a.createElement(J,null):o.a.createElement(H,{username:n,password:a,handleSubmit:this.handleSubmit,handleChange:this.handleChange}),o.a.createElement(x,{loggedIn:e}))}}]),t}(a.Component);var P=Object(i.b)(function(e){return{loggedIn:e.authentication.loggedIn}})(M),q=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(d.a)(t).call(this,e))).state={lobbyList:[]},console.log("session Check",localStorage.getItem("accessToken")),n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(B.getGameLobby())}},{key:"render",value:function(){var e=this.props.lobbyList;return console.log("Lobby render",e),o.a.createElement("div",null,o.a.createElement(D,{lobbys:e}))}}]),t}(a.Component);var z=Object(i.b)(function(e){return{lobbyList:e.lobby}})(q),$=n(38),K=n.n($).a.parse(location.search),Q=function(e){function t(e){var n;Object(h.a)(this,t),n=Object(b.a)(this,Object(d.a)(t).call(this,e));var a={headers:{Head:K.container}};return console.log("run Game",a),v.a.get("http://localhost",a).then(function(e){return console.log(e)}),n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"hi"))}}]),t}(a.Component);var V=Object(i.b)(function(e){})(Q),X=document.getElementById("root");c.a.render(o.a.createElement(i.a,{store:w},o.a.createElement(l.a,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",component:P}),o.a.createElement(s.a,{path:"/lobby",component:z}),o.a.createElement(s.a,{path:"/game",component:V})))),X),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.7cea3d11.chunk.js.map